{% set title = "Portfolio"%} {% extends 'layout.html' %} {% block page_content %}

<div class="">
  <div class="portfolio-container">
    <div class="add-portfolio-btn">
      <a class="btn" style="background-color:#871E99; color:#fff" href="/new-portfolio" role="button">+ ADD
        PORTFOLIO</a>
    </div>

    <div class="d-grid">
        {%  for portfolio in portf %}
        {% if portfolio.preview_img %}

      <!-- Portfolio card -->

      <div class="portfolio-card">
        <img src="{{ portfolio.preview_img }}" class="portfolio-img" alt="the-image-for-portfolios">
        <div class="d-flx j-c-sb al-i-c">
          <h5 class="portfolio-name"><a href="/portfolio/{{ portfolio.slug |lower }}">{{ portfolio.title|raw }}</a>
          </h5>
          <div>
            <a href="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
              aria-expanded="false">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path
                  d="M296 136c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40zm0 240c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40zm0-120c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40z" />
                </svg>
            </a>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="/portfolio-editor/{{ post.slug |lower }}" class="edit-post">EDIT</a>
              <a class="dropdown-item" data-toggle="modal" id="{{ post.slug |lower }}" onclick="deletePost(this)"
                data-target="#cancelModal">DELETE</a>
            </div>
          </div>
        </div>
        <div class="portfolio-content">
            <p>
          {{ portfolio.body|raw }}
          <span> <a href="/portfolio/{{ post.slug |lower }}" class="read-more">Read More</a> </span>
</p>
      </div>

      {% else %}

      <div class="portfolio-card">
          
          <div class="d-flx j-c-sb al-i-c">
            <h5 class="portfolio-name"><a href="/portfolio/{{ portfolio.slug |lower }}">{{ portfolio.title|raw }}</a>
            </h5>
            <div>
              <a href="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                aria-expanded="false">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                  <path
                    d="M296 136c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40zm0 240c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40zm0-120c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40z" />
                  </svg>
              </a>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="/portfolio-editor/{{ post.slug |lower }}" class="edit-post">EDIT</a>
                <a class="dropdown-item" data-toggle="modal" id="{{ post.slug |lower }}" onclick="deletePost(this)"
                  data-target="#cancelModal">DELETE</a>
              </div>
            </div>
          </div>
          <div class="portfolio-content">
              <p>
            {{ portfolio.body|raw }}
            <span> <a href="/portfolio/{{ post.slug |lower }}" class="read-more">Read More</a> </span>
  </p>
        </div>

        {% endif %}
        {% else %}

        <div class="row">
            <div class="no-post-alert mx-auto my-4">
                <p class="text-grey">
                    You have no portfolio files. Click the "Add Portfolio" Button to begin. 
                  </p>
        </div>
      </div>
      {% endfor %}
    </div>


<!-- Dummy portfolio card  -->
          <div class="portfolio-card">
                <img src="resources/themes/ghost/assets/img/portfolio-photo2.png" class="portfolio-img" alt="...">
                    <div class="d-flx j-c-sb al-i-c">
                        <h5 class=portfolio-name>HNG Folio</h5>
                        <div>
                            <a href="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M296 136c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40zm0 240c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40zm0-120c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40z"/></svg>
                            </a>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="">EDIT</a>
                                <a class="dropdown-item" href="">DELETE</a>
                            </div>
                        </div>
                    </div>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Atque aliquam excepturi sapiente voluptatum itaque, corrupti dolorem laudantium iure velit voluptates odit quae omnis libero et...
                </p>
            </div>


  </div>
</div>
</div>
<!-- modal begins here -->
<div id="cancelModal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content no-border">
        <div class="modal-header no-border">
          <button type="button" class="close" data-dismiss="modal" style="outline: none;">&times;</button>
        </div>
        <div class="modal-body no-border">
          <img src="/resources/themes/ghost/assets/img/cancel-post-modal.png"
            class="img-fluid mx-auto d-block dialog-img" alt="cancel post image">
          <p class="cancel-modal-text text-center font-weight-bold">Do you want to delete this post?</p>
        </div>
        <div class="modal-footer no-border mx-auto d-block">

          <a class="btn btn-primary canel-post" id="deletePostBtn" style="cursor: pointer;">Delete</a>
        </div>

      </div>
    </div>
  </div>
  <!-- modal ends here -->

<script>
  ///js code to append post id to pop up modal for deleting posts
  function deletePost(button) {
    let postSlug = button.id;
    let deletePostBtn = document.getElementById('deletePostBtn');
    deletePostBtn.setAttribute('href', '/deleteportfolio/' + postSlug);
  }
</script>

{% endblock page_content %}
